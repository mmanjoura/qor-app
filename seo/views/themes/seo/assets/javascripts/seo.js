"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){"use script";function o(s,e){this.$element=t(s),this.options=t.extend({},o.DEFAULTS,t.isPlainObject(e)&&e),this.focusedInputID="",this.init()}return o.prototype={constructor:o,init:function(){var t=this.$element;this.$submit=t.find(".qor-seo-submit"),this.$addTgas=t.find(".qor-seo-tag"),this.$tagInputs=t.find(".qor-seo-input-field"),this.$settingInput=t.find(".qor-seo__defaults-input"),this.bind()},bind:function(){this.$submit.on("click.qor.seo",t.proxy(this.submitSeo,this)),this.$tagInputs.on("click keyup",t.proxy(this.tagInputsFocus,this)),this.$tagInputs.on("blur.qor.seo",t.proxy(this.tagInputsBlur,this)),this.$settingInput.on("click.qor.seo",t.proxy(this.toggleDefault,this)),this.$addTgas.on("click.qor.seo",t.proxy(this.addTags,this))},unbind:function(){this.$submit.off("click.qor.seo",t.proxy(this.submitSeo,this)),this.$tagInputs.off("click keyup",t.proxy(this.tagInputsFocus,this)),this.$tagInputs.off("blur.qor.seo",t.proxy(this.tagInputsBlur,this)),this.$settingInput.off("click.qor.seo",t.proxy(this.toggleDefault,this)),this.$addTgas.off("click.qor.seo",t.proxy(this.addTags,this))},toggleDefault:function(){var o=this.$settingInput.is(":checked"),s=t(".qor-seo__settings");o?s.hide():s.show()},tagInputsFocus:function(){this.$addTgas.addClass("focus");var o=t(document.activeElement);this.focusedInputID=o.prop("id"),this.focusedInputStart=o[0].selectionStart,this.focusedInputEnd=o[0].selectionEnd,this.focusedInputVal=o.val()},tagInputsBlur:function(){this.$addTgas.removeClass("focus"),this.$focusedInputID=!1},addTags:function(o){if(this.focusedInputID){var s="",e=this.focusedInputVal.substring(0,this.focusedInputStart),i=this.focusedInputVal.substring(this.focusedInputEnd,this.focusedInputVal.length);s=e+("{{"+t(o.currentTarget).data("tagValue")+"}}")+i,t("#"+this.focusedInputID).val(s).focus()}},submitSeo:function(){var o=this.$element,s=o.find(".qor-form");return t(".qor-seo-alert").hide(),t.ajax({method:"POST",url:s.attr("action"),data:new FormData(s[0]),processData:!1,contentType:!1,dataType:"json",success:function(){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,t(".qor-seo-alert.qor-alert--success").show(),setTimeout(function(){t(".qor-alert--success").hide()},3e3)},error:function(){t(".qor-seo-alert.qor-alert--error").show()}}),!1},destroy:function(){this.unbind(),this.$element.removeData("qor.seo")}},o.DEFAULTS={},o.plugin=function(s){return this.each(function(){var e,i=t(this),n=i.data("qor.seo");if(!n){if(/destroy/.test(s))return;i.data("qor.seo",n=new o(this,s))}"string"==typeof s&&t.isFunction(e=n[s])&&e.apply(n)})},t(function(){var s={};t(document).on("click.qor.fixedAlert",'[data-dismiss="fixed-alert"]',function(){t(this).closest(".qor-alert").hide()}).on("disable.qor.seo",function(s){o.plugin.call(t('[data-toggle="qor.seo"]',s.target),"destroy")}).on("enable.qor.seo",function(e){o.plugin.call(t('[data-toggle="qor.seo"]',e.target),s)}).triggerHandler("enable.qor.seo")}),o});